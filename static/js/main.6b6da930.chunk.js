(this["webpackJsonptictactoe-react"]=this["webpackJsonptictactoe-react"]||[]).push([[0],[,,,,,,,,,,,,function(e,t,a){e.exports=a(26)},,,,,function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(10),i=a.n(s),l=(a(17),a(18),a(11)),c=a(5),u=a.n(c),o=a(7),h=a(8),p=a(1),f=a(2),v=a(4),m=a(3),d=(a(20),function(){function e(t){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object(p.a)(this,e),this.handicap=0<=t&&t<100?t:10,this.turn=a?1:-1,this.state=[[0,0,0],[0,0,0],[0,0,0]]}return Object(f.a)(e,[{key:"playerMove",value:function(e,t){if(1!==this.turn)throw Error("it's not your turn!");if(0!==this.state[e][t])throw Error("square not empty!");return this.state[e][t]=1,console.log("player move done"),this.turn=-1,this.gameFinished}},{key:"makeMove",value:function(){var e=this;if(-1!==this.turn)throw Error("it's not my turn!");if(console.log("computer moves"),this._randInt(100)<this.handicap)console.log("you are lucky, I will just play a random square ;)"),this._randomMove();else for(var t=[function(){return e._win()},function(){return e._avoidDefeat()},function(){return e._matchball()},function(){return e._center()},function(){return e._oppositeCorner()},function(){return e._emptyCorner()},function(){return e._randomMove()}];t.length&&!t.shift()(););return this.turn=1,this.gameFinished}},{key:"_win",value:function(){return this._fillTriplet(-2,"win")}},{key:"_avoidDefeat",value:function(){return this._fillTriplet(2,"avoid defeat")}},{key:"_fillTriplet",value:function(e,t){var a=this,n=this._checkTriplet(e);if(n.length){var r=n[this._randInt(n.length)];if(0<=r&&r<3){var s=this._where(this.state[r],0)[0];this.state[r][s]=-1}else if(3<=r&&r<6){var i=r-3;console.log([0,1,2].map((function(e){return a.state[e][i]})));var l=this._where([0,1,2].map((function(e){return a.state[e][i]})),0)[0];this.state[l][i]=-1}else if(6===r){var c=this.state.flat(),u=this._where([0,4,8].map((function(e){return c[e]})),0)[0];this.state[u][u]=-1}else{var o=this.state.flat(),h=this._where([6,4,2].map((function(e){return o[e]})),0)[0];this.state[2-h][h]=-1}return console.log(t),!0}return!1}},{key:"_matchball",value:function(){var e=this,t=function(e,t){return e+t},a=this._where(this.state.map((function(e){return e.reduce(t)})),-1);this._shuffle(a);for(var n=0;n<a.length;n++){var r=a[n],s=this._where(this.state[r],0);if(s.length){console.log("create matchball: find empty square in row");var i=s[this._randInt(s.length)];return this.state[r][i]=-1,!0}}var l=this._where([0,1,2].map((function(a){return[0,1,2].map((function(t){return e.state[t][a]})).reduce(t)})),-1);this._shuffle(l);for(var c=function(t){var a=l[t],n=e._where([0,1,2].map((function(t){return e.state[t][a]})),0);if(n.length){console.log("create matchball: find empty square in column");var r=n[e._randInt(n.length)];return e.state[r][a]=-1,{v:!0}}},u=0;u<l.length;u++){var o=c(u);if("object"===typeof o)return o.v}return!1}},{key:"_center",value:function(){return 0===this.state[1][1]&&(console.log("play center"),this.state[1][1]=-1,!0)}},{key:"_oppositeCorner",value:function(){var e=this.state.flat();return e[0]+e[8]===1?(console.log("play opposite corner"),0===this.state[0][0]?this.state[0][0]=-1:this.state[2][2]=-1,!0):e[2]+e[6]===1&&(console.log("play opposite corner"),0===this.state[0][2]?this.state[0][2]=-1:this.state[2][0]=-1,!0)}},{key:"_emptyCorner",value:function(){var e=this,t=[[0,0],[0,2],[2,0],[2,2]],a=this._where([0,2,6,8].map((function(t){return e.state.flat()[t]})),0);if(a.length){console.log("play empty corner");var n=this._randInt(a.length);return this.state[t[a[n]][0]][t[a[n]][1]]=-1,!0}return!1}},{key:"_randomMove",value:function(){var e=this._where(this.state.flat(),0);if(e.length){console.log("play random square");var t=e[this._randInt(e.length)];return this.state[Math.floor(t/3)][t%3]=-1,!0}return!1}},{key:"_randInt",value:function(e){return Math.floor(.99999*Math.random()*e)}},{key:"_where",value:function(e,t){var a=[];return e.forEach((function(e,n){e===t&&a.push(n)})),a}},{key:"_shuffle",value:function(e){for(var t=e.length-1;t>0;t--){var a=Math.floor(Math.random()*(t+1)),n=[e[a],e[t]];e[t]=n[0],e[a]=n[1]}return e}},{key:"_checkTriplet",value:function(e){var t=this,a=function(e,t){return e+t},n=this.state.map((function(e){return e.reduce(a)})),r=[0,1,2].map((function(e){return[0,1,2].map((function(a){return t.state[a][e]})).reduce(a)})),s=this.state.flat(),i=[0,4,8].map((function(e){return s[e]})).reduce(a),l=[6,4,2].map((function(e){return s[e]})).reduce(a);return this._where(n.concat(r).concat([i]).concat([l]),e)}},{key:"winner",get:function(){return this._winner}},{key:"winningLine",get:function(){return this._winningLine}},{key:"gameFinished",get:function(){var e=[this._checkTriplet(-3),this._checkTriplet(3),0===this._where(this.state.flat(),0).length],t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[6,4,2]];return e[0].length?(console.log("computer wins"),this._winner=-1,this._winningLine=t[e[0][0]],!0):e[1].length?(console.log("player wins"),this._winner=1,this._winningLine=t[e[1][0]],!0):!(!e[2]||e[0].length||e[1].length)&&(console.log("that's a draw"),this._winner=0,!0)}}]),e}()),g=a(6),y=(a(21),function(e){Object(v.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={selected:e.currentLevel},n.updateSelectionState=n.updateSelectionState.bind(Object(g.a)(n)),n}return Object(f.a)(a,[{key:"updateSelectionState",value:function(e){var t=parseInt(e.target.value);this.setState({selected:t}),this.props.callback(t)}},{key:"render",value:function(){var e=this,t=this.props.levels.map((function(t,a){return r.a.createElement("div",{className:"radioBtn",key:a},r.a.createElement("label",{className:"radioBtn-label"},t),r.a.createElement("input",{type:"radio",value:a,checked:e.state.selected===a,onChange:e.updateSelectionState}))}));return r.a.createElement("div",{className:"level-selection-grid"},t)}}]),a}(r.a.Component)),b=(a(22),function(e){Object(v.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).props=e,n.state={highlight:!1},n}return Object(f.a)(a,[{key:"highlight",value:function(){var e=this;this.setState({highlight:!0}),setTimeout((function(){return e.setState({highlight:!1})}),800)}},{key:"render",value:function(){var e=this,t="";return 1===this.props.owner?t=r.a.createElement("span",null,"\u0fbe"):-1===this.props.owner&&(t=r.a.createElement("span",null,"\u262f")),r.a.createElement("div",{className:"square "+(this.state.highlight?"highlight-winning-line ":" ")+(0===this.props.owner||this.state.highlight?"":"played"),onClick:function(){return e.props.receiveClick(e.props.id)}},r.a.createElement("div",{className:"tag"},t))}}]),a}(r.a.Component)),k=(a(23),a(24),function(e){Object(v.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).inputRef=r.a.createRef(),n.state={value:e.text,focus:!1,disabled:!1},n.handleFocus=n.handleFocus.bind(Object(g.a)(n)),n.handleInput=n.handleInput.bind(Object(g.a)(n)),n}return Object(f.a)(a,[{key:"handleFocus",value:function(e){e.target.select(),this.setState({focus:!0})}},{key:"handleInput",value:function(e){e.preventDefault(),this.setState({disabled:!0,value:this.inputRef.current.value})}},{key:"render",value:function(){var e;if(this.state.disabled)e=r.a.createElement("div",{className:"cell"},this.state.value);else{var t=this.state.focus?r.a.createElement("span",null):r.a.createElement("label",{id:"pencil"},"\u270e");e=r.a.createElement("form",{onSubmit:this.handleInput},r.a.createElement("div",{className:"input-form-div"},t,r.a.createElement("input",{ref:this.inputRef,type:"text",defaultValue:this.state.value,onBlur:this.handleInput,onFocus:this.handleFocus})),r.a.createElement("input",{type:"submit"}))}return e}}]),a}(r.a.Component)),w=function(e){Object(v.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={classNames:""},n}return Object(f.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this;this.props.value!==e.value&&(this.setState({classNames:"scale-animation"}),setTimeout((function(){t.setState({classNames:""})}),400))}},{key:"render",value:function(){var e="Player"===this.props.label?r.a.createElement(k,{text:"Player",edit:!0}):r.a.createElement("div",{className:"cell"},this.props.label);return r.a.createElement("div",{className:this.state.classNames},e,r.a.createElement("div",{className:"cell"},this.props.value))}}]),a}(r.a.Component),_=(a(25),function(e){Object(v.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={stats:e.stats},n}return Object(f.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"scoreboard-grid"},r.a.createElement(w,{label:"Player",value:this.props.stats.player}),r.a.createElement(w,{label:"Draw",value:this.props.stats.draw}),r.a.createElement(w,{label:"Computer",value:this.props.stats.computer}))}}]),a}(r.a.Component)),E=[{label:"trivial",handicap:90},{label:"easy",handicap:65},{label:"medium",handicap:48},{label:"hard",handicap:24},{label:"impossible",handicap:5}],j=function(e){Object(v.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).props=e,n.DELAY=e.delay<0||e.delay>500?300:e.delay,n.game=null,n.level=2,n.locked=!1,n.playerBegins=n.props.playerBegins,n.playerBeginsAfterDraw=!n.playerBegins,n.squareRefs=Object(h.a)(Array(9)).map((function(){return r.a.createRef()})),n.state={state:[[0,0,0],[0,0,0],[0,0,0]],stats:{computer:0,draw:0,player:0}},n}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.newGame()}},{key:"newGame",value:function(){var e=Object(o.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.game=new d(E[this.level].handicap,this.playerBegins),this.setState({state:this.game.state}),this.playerBegins){e.next=8;break}return this.locked=!0,e.next=6,this.sleep(200);case 6:this.game.makeMove(),this.setState({state:this.game.state});case 8:this.locked=!1;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resetStats",value:function(){this.setState({stats:{computer:0,draw:0,player:0}})}},{key:"processResults",value:function(){var e=Object(o.a)(u.a.mark((function e(){var t,a=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.winner,this.setState((function(e){var a=Object(l.a)({},e.stats);return-1===t?a.computer+=1:1===t?a.player+=1:a.draw+=1,{stats:a}})),-1===t?this.playerBegins=!0:1===t?this.playerBegins=!1:(this.playerBegins=this.playerBeginsAfterDraw,this.playerBeginsAfterDraw=!this.playerBeginsAfterDraw),0!==t&&this.game._winningLine.map((function(e){return a.squareRefs[e].current.highlight()})),e.next=6,this.sleep(800);case 6:this.newGame();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sleep",value:function(e){return new Promise((function(t){return setTimeout(t,e)}))}},{key:"userInput",value:function(){var e=Object(o.a)(u.a.mark((function e(t){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Math.floor(t/3),n=t%3,this.locked){e.next=22;break}if(this.locked=!0,e.prev=4,r=this.game.playerMove(a,n),this.setState({state:this.game.state}),!r){e.next=11;break}this.processResults(),e.next=16;break;case 11:return e.next=13,this.sleep(Math.floor((.6+.4*Math.random())*this.DELAY));case 13:r=this.game.makeMove(),this.setState({state:this.game.state}),r?this.processResults():this.locked=!1;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(4),console.log(e.t0),this.locked=!1;case 22:case"end":return e.stop()}}),e,this,[[4,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"handleLevelSelection",value:function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.level=t,this.playerBegins=!0,this.resetStats(),this.newGame();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=Object(h.a)(new Array(9)).map((function(t,a){return r.a.createElement(b,{ref:e.squareRefs[a],id:a,key:a,owner:e.state.state[Math.floor(a/3)][a%3],receiveClick:e.userInput.bind(e)})}));return r.a.createElement("div",null,r.a.createElement("div",{className:"board"},t),r.a.createElement(_,{stats:this.state.stats}),r.a.createElement(y,{callback:this.handleLevelSelection.bind(this),currentLevel:this.level,levels:E.map((function(e){return e.label}))}))}}]),a}(r.a.Component);var O=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Let's Play: Tic Tac Toe"),r.a.createElement("h2",null,"(implemented using React)"),r.a.createElement("div",{className:"game"},r.a.createElement(j,{playerBegins:!0,delay:300})))};i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O,null)),document.getElementById("root"))}],[[12,1,2]]]);
//# sourceMappingURL=main.6b6da930.chunk.js.map